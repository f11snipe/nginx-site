var LS_SIM='access.log  error.log  <span class="ex">watch</span>',LS_ALL=`
total 92
-rw-r----- 1 root root    69 Apr 29 16:22 access.log
-rw-r----- 1 root root    69 Apr 29 16:22 error.log
-rwxr-xr-x 1 root root   118 Apr 29 17:20 <span class="ex">watch</span>
`;$(function(){var n,c=[],r="/var/log/nginx",o="root",s=["/","$","\\","-","*","&","^","#","@"," ","!","(",")","[","]","|","Tab"],l=$("pre#console"),a={"access.log":"/logs/access.log","error.log":"/logs/error.log",watch:"/logs/watch.sh"},i=Object.keys(a);function p(){var e=document.getElementById("console");e.scrollTop=e.scrollHeight}function e(){l.append(`
root@nginx:/var/log/nginx# `)}var t=(e,t)=>{var r,e=e[0]||i[0];a[e]&&(r=a[e],n=setInterval(()=>{$.get(r,e=>{l.text(e),p()})},500))},g={id:(e,t)=>t("uid=0(root) gid=0(root) groups=0(root)"),pwd:(e,t)=>t(r),watch:t,"./watch":t,clear:(e,t)=>{l.text(""),t("")},whoami:(e,t)=>t(o),cat:(e,t)=>{e=e[0];if(!e||!a[e])return t("hmmm, not sure what you lookin for...");$.get(a[e],t)},tail:(e,t)=>{e=e[0];if(!e||!a[e])return t("hmmm, not sure what you lookin for...");$.get(a[e],e=>{e=e.split(`
`),e=e.slice(e.length-10);return t(e.join(`
`))})},ls:(e,t)=>{var r=/^-[a-z]*l[a-z]*/,o="none";e[0]&&r.test(e[0])?e[0]&&r.test(e[0])&&(o=LS_ALL):o=LS_SIM,t(o)}},h=()=>{c=[],e(),p()};$(document).on("keydown",function(e){switch(e.key){case"Tab":var t=c.join("").trim().split(" ").map(e=>e.trim()).pop().replace(/^\.\//,"");i.forEach(e=>{0===e.indexOf(t)&&(e=e.substring(t.length),l.append(e),c=c.concat(Array.from(e)))});break;case"Enter":o=(a=c.join("").split(" "))[0],a=a.slice(1),l.append(`
`),g[o]&&"function"==typeof g[o]?g[o](a,e=>{l.append(e),h()}):(l.append(`Command '${o}' not found.`),h());break;case"Backspace":c.length&&(l.html(l.html().slice(0,-1)),c.pop());break;default:if(e.altKey||e.ctrlKey||e.shiftKey){var r=e;switch(r.key){case"c":case"C":case"d":case"D":case"z":case"Z":r.ctrlKey&&n&&(clearInterval(n),h());break;case"v":case"V":r.ctrlKey&&navigator.clipboard.readText().then(e=>{e&&(l.append(e),c=c.concat(Array.from(e)))});break;default:r.ctrlKey&&r.shiftKey||1===r.key.length&&(l.append(r.key),c.push(r.key))}}else 1===e.key.length&&(l.append(e.key),c.push(e.key))}var o,a;if(s.includes(e.key))return e.preventDefault(),!1}),l.on("click",function(e){l.addClass("active")}),e()});