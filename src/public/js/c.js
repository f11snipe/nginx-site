var LS_SIM='access.log  error.log  snipe.log  <span class="ex">watch</span>',LS_ALL=`
total 69
-rw-r----- 1 root root    69 Apr 29 16:22 access.log
-rw-r----- 1 root root    69 Apr 29 16:22 error.log
-rw-r----- 1 root root    69 Apr 29 16:22 snipe.log
-rwxr-xr-x 1 root root   118 Apr 29 17:20 <span class="ex">watch</span>
`;$(function(){var n,s=[],o=["wtf is going on","how did this console get here?","hopefully i can turn it off..."],r="/var/log/nginx",a="root",e="nginx",c=["/","$","\\","-","*","&","^","#","@"," ","!","(",")","[","]","|","Tab"],l=$("pre#console"),i={"access.log":"/logs/access.log","error.log":"/logs/error.log","snipe.log":"/logs/snipe.log",watch:"/logs/watch.sh"},p=Object.keys(i);function g(){var e=document.getElementById("console");e.scrollTop=e.scrollHeight}function t(){l.append(`
`+a+`@${e}:${r}# `)}var h=(e,t)=>{var o,e=e[0]||p[0];i[e]&&(o=i[e],n=setInterval(()=>{$.get(o,e=>{l.text(e),g()})},1e3))},d={id:(e,t)=>t("uid=0(root) gid=0(root) groups=0(root)"),cd:(e,t)=>{r=e[0],t("")},ftw:(e,t)=>$.get("/art/ftw.txt",t),snipe:(e,t)=>$.get("/art/ftw.txt",t),f11snipe:(e,t)=>$.get("/art/ftw.txt",t),lol:(e,t)=>$.get("/art/lol-70.txt",t),derp:(e,t)=>$.get("/art/derp-60.txt",t),glhf:(e,t)=>$.get("/art/glhf.txt",t),pwd:(e,t)=>t(r),ssh:(e,t)=>t("You wish!"),exit:(e,t)=>t("Umm, noooo"),help:(e,t)=>t("NO!"),shit:(e,t)=>t("Watch your language!"),fuck:(e,t)=>t("Watch your language!"),tail:h,watch:h,"./watch":h,whoami:(e,t)=>t(a),clear:(e,t)=>{l.text(""),t("")},history:(e,t)=>t(o.map((e,t)=>(t+1).toString().padStart(5)+`	`+e).join(`
`)),cat:(e,t)=>{e=e[0];if(!e||!i[e])return t("hmmm, not sure what you lookin for...");$.get(i[e],t)},ls:(e,t)=>{var o=/^-[a-z]*l[a-z]*/,r="none";e[0]&&o.test(e[0])?e[0]&&o.test(e[0])&&(r=LS_ALL):r=LS_SIM,t(r)}},f=()=>{o.push(s.join("")),s=[],t(),g()};function u(e){switch(e.key){case"Tab":var t=s.join("").trim().split(" ").map(e=>e.trim()).pop().replace(/^\.\//,"");p.forEach(e=>{0===e.indexOf(t)&&(e=e.substring(t.length),l.append(e),s=s.concat(Array.from(e)))});break;case"Enter":r=(a=s.join("").split(" "))[0],a=a.slice(1),l.append(`
`),d[r]&&"function"==typeof d[r]?d[r](a,e=>{l.append(e),f()}):(l.append(`Command '${r}' not found.`),f());break;case"Backspace":s.length&&(l.html(l.html().slice(0,-1)),s.pop());break;default:if(e.altKey||e.ctrlKey||e.shiftKey){var o=e;switch(o.key){case"c":case"C":case"d":case"D":case"z":case"Z":o.ctrlKey&&n&&(clearInterval(n),f());break;case"v":case"V":o.ctrlKey&&navigator.clipboard.readText().then(e=>{e&&(l.append(e),s=s.concat(Array.from(e)))});break;default:!(o.ctrlKey&&o.shiftKey||1!==o.key.length)?(l.append(o.key),s.push(o.key)):console.debug("Ignore special key",o)}}else 1===e.key.length?(l.append(e.key),s.push(e.key)):console.debug("Ignoring key",e.key)}var r,a;if(c.includes(e.key))return e.preventDefault(),!1}l.on("click",function(e){l.addClass("active"),$(document).on("keydown",u)}),t()});