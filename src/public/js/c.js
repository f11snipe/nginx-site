var LS_SIM='access.log  error.log  snipe.log  <span class="ex">watch</span>',LS_ALL=`
total 69
-rw-r----- 1 root root    69 Apr 29 16:22 access.log
-rw-r----- 1 root root    69 Apr 29 16:22 error.log
-rw-r----- 1 root root    69 Apr 29 16:22 snipe.log
-rwxr-xr-x 1 root root   118 Apr 29 17:20 <span class="ex">watch</span>
`;$(function(){var n,s=[],r="/var/log/nginx",t="root",c=["/","$","\\","-","*","&","^","#","@"," ","!","(",")","[","]","|","Tab"],l=$("pre#console"),a={"access.log":"/logs/access.log","error.log":"/logs/error.log","snipe.log":"/logs/snipe.log",watch:"/logs/watch.sh"},i=Object.keys(a);function p(){var e=document.getElementById("console");e.scrollTop=e.scrollHeight}function e(){l.append(`
root@nginx:/var/log/nginx# `)}var o=(e,o)=>{var r,e=e[0]||i[0];a[e]&&(r=a[e],n=setInterval(()=>{$.get(r,e=>{l.text(e),p()})},500))},g={id:(e,o)=>o("uid=0(root) gid=0(root) groups=0(root)"),pwd:(e,o)=>o(r),watch:o,"./watch":o,clear:(e,o)=>{l.text(""),o("")},whoami:(e,o)=>o(t),cat:(e,o)=>{e=e[0];if(!e||!a[e])return o("hmmm, not sure what you lookin for...");$.get(a[e],o)},tail:(e,o)=>{e=e[0];if(!e||!a[e])return o("hmmm, not sure what you lookin for...");$.get(a[e],e=>{e=e.split(`
`),e=e.slice(e.length-10);return o(e.join(`
`))})},ls:(e,o)=>{var r=/^-[a-z]*l[a-z]*/,t="none";e[0]&&r.test(e[0])?e[0]&&r.test(e[0])&&(t=LS_ALL):t=LS_SIM,o(t)}},h=()=>{s=[],e(),p()};$(document).on("keydown",function(e){switch(e.key){case"Tab":var o=s.join("").trim().split(" ").map(e=>e.trim()).pop().replace(/^\.\//,"");i.forEach(e=>{0===e.indexOf(o)&&(e=e.substring(o.length),l.append(e),s=s.concat(Array.from(e)))});break;case"Enter":t=(a=s.join("").split(" "))[0],a=a.slice(1),l.append(`
`),g[t]&&"function"==typeof g[t]?g[t](a,e=>{l.append(e),h()}):(l.append(`Command '${t}' not found.`),h());break;case"Backspace":s.length&&(l.html(l.html().slice(0,-1)),s.pop());break;default:if(e.altKey||e.ctrlKey||e.shiftKey){var r=e;switch(r.key){case"c":case"C":case"d":case"D":case"z":case"Z":r.ctrlKey&&n&&(clearInterval(n),h());break;case"v":case"V":r.ctrlKey&&navigator.clipboard.readText().then(e=>{e&&(l.append(e),s=s.concat(Array.from(e)))});break;default:r.ctrlKey&&r.shiftKey||1===r.key.length&&(l.append(r.key),s.push(r.key))}}else 1===e.key.length&&(l.append(e.key),s.push(e.key))}var t,a;if(c.includes(e.key))return e.preventDefault(),!1}),l.on("click",function(e){l.addClass("active")}),e()});